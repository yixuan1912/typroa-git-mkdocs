# vim的使用
## 1、vim常用命令
### 1.1 插入
  1. i 在当前位置之前一个字符位置插入
  2. I 在当前行首插入
  3. a 在当前位置后插入
  4. A 在当前行尾插入
  5. o 在当前行之后插入一行
  6. O 在当前行之前插入一行
### 1.2 保存
  1. :wq 保存并退出
  2. ZZ(shift+ zz) 保存并退出
  3. :q! 强制退出并忽略所有更改
  4. :e! 放弃所有修改，并打开原来文件。
### 1.3 删除
  1. dl 删除当前字符， dl=x
  2. dh 删除前一个字符
  3. dd 删除当前行
  4. dj 删除上一行
  5. dk 删除下一行
  6. :1,10d 删除1-10行
  7. :11,$d 删除11行及以后所有的行
  8. :1,$d 删除所有行
  9. J(shift + j)删除两行之间的空行，实际上是合并两行。
  10. 10d 删除当前行开始的10行
### 1.4复制与粘贴
  1.  yy 拷贝当前行
  2. nyy 拷贝当前后开始的n行，比如2yy拷贝当前行及其下一行。
  3. shift+p 在当前行前粘贴
  4. ddp交换当前行和其下一行
  5. :1,$ co $ 将整个文件复制一份并添加到文件尾部。
### 1.5 可视化模式命令
  1. v 进入可视模式
  2. shift+v 整行选择
  3. ctrl+v 可视模式的列选择

 **应用举例：注释多行**

  - 按下v，进入可视化模式
  - 按下ctl+v进入 visual block模式
  - 使用方向键上下选择需要插入的列
  - 按下shift+i键，进入插入模式
  - 输入//
  - 按下esc键
## 2、 vim 多窗口
###  2.1水平打开
``` shell
vs filename
```
应用举例
``` vim
:vs emp.txt
```
###  2.2 垂直打开
```vim
sv emp.txt
```
应用举例：
```vim
：sv emp.txt
```
### 2.3 原窗口打开
```vim
open  file.nanme
```
应用举例：
```vim
：open emp.txt
```
### 2.4多窗口切换
  1. 多个窗口切换，ctl+w
  2. 单窗口多个文件 ctl+6 切换内容
## 3、vim搜索与替换
### 3.1 搜索
  1. 正向搜索: **/searchContent**

    **举例**
   ```vim
   :/sales 
   ```
 2. 反向搜索:  **?searchContent**
    **举例**
   ```vim
   :?sales 
   ```
  3. 快捷键
   * n  查找下一个
   * N 查找上一个
   4. 其他设置
   * 高亮显示搜索到的内容： set hlsearch
   * 取消高亮显示：set nohlsearch
   * 忽略大小写 :set ignorecase
   * 精确匹配大小写: set noignorecase
   * 禁止循环查找： set nowrapscan
   * 启用循环查找：set wrapscan

### 3.2 替换
  1. 基本替换
      **格式：[address]s/源字符串/目的字符串/[option]**
   * [address] 表示检索范围，省略表示当前行，%表示整篇文档相当于：1,$, .代表当前行，.,10代表从当前行到第10行
   * s替换命令
   * 源字符串，可以是正则表达式
   * 目的字符串，可以是正则表达式
   * [option] 表示操作类型，可以组合使用，如果gc ,gn  
       > - g表示全局替换
       > - c表示确认
       > - option省略时仅对每行第一个匹配串进行替换
       > - n统计匹配的行
       > - e忽略出现的错误
   2. 举例
   ``` vim
   :1,$s/the/The/g
   ```
  3. 说明：
 * $ 表示文档结尾
 * s替换命令（subtitute)
 * the被替换字符串
 * The替换后的字符串
 * g替换查询到的每一个，否则只替换每行第一个查询到的字符串
##  4、vim全局命令
### 4.1 global命名形式
```vim
    [range]global/{pattern}/{command}
```
  说明：
  > - [range]表示指定的文本范围，g ,% 
  > - {pattern}正则表达式
  > - {command}表示命令，d删除，m移动

### 4.2 应用举例
  1. 倒叙
  ``` vim
    :g/^/m 0
  ```
  **说明：**
  - /^/表示一行的开头
  - m表示移动 
  - 0 表示移动到第一行
  2. 删除偶数行
  ``` vim
  :g/^/+d
  ```
 **说明：**
  - /^/表示一行的开头
  - +表示当前行的下一行
  - d表示删除
  
    方法2：
  ``` vim
  %norm jdd
  ```
  **说明：**
  - % 全局命令
  - norm ，表示vim正常模式
  - jdd，j向下移动，dd删除命令
3. 删除空行
``` vim
:g/^$/d
```
4. 在行尾添加分号
``` vim
%norm A;
```
**说明**
- %norm 全局normal模式下 
- A; A在行尾插入；
5. 在行首插入//
```vim
%norm i//
```
6. 在red开头的行下面添加一行，内容为：This is a  test!
``` vim
g/^red/norm oThis is a test!
```
**说明：**
- g全局命令
- ^red模式，以red开头的行
- o在行下面添加一行，内容为：This is a test!
### 4.3 %与g的区别
1. %==g/.*/,说明%匹配文档的每一行 
2. g后面必须要跟上pattern，即g/pattern/