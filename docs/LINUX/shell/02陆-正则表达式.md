# linux正则表达式
##  1、什么是正则表达式
1. 正则表达式就是为了处理大量的文本|字符串而定义的一套规则和方法
2. 通过定义的这些特殊符号的辅助，系统管理员就可以快速过滤，替换或输出需要的字符串。
 3. 正则表达式是一种描述一组字符串的模式，类似数字表达式，通过各种操作符组成更小的表达式
## 2、为什么要使用正则表达式？
1. 可以过滤大量日志工作，提高运维效率
2. 简单，高效
3. 正则表达式高级工具，三剑客（vi,awk,sed）都支持。
##  3、使用正则表达式注意事项
1. linux正则表达式以行为单位
2. 为了便于区别过滤出来的字符串，一定要配合grep/egrep命令学习
##  4、正则表达式的分类
1. 基本正则表达式(BRE,Basic Regular Express)
    只承认^$.[]*,其他的为普通字符
2. 高级功能：扩展正则表达式(ERE,Extended Regular Expression)
    增加了(),{},?,+,|
##  5、基本正则表达式

| 序号 |   字符   |                                   描述                                   |
| :-: | :------: | :----------------------------------------------------------------------: |
|  1   |    ^     |                        ^ word搜索以word开头的内容                         |
|  2   |    $     |                         word$搜索以word结尾的内容                         |
|   3  |    ^$    |                                 表示空行                                  |
|   4  |    .     |                              代表任意的字符                               |
|  5   |    \     |       转义字符，让有特殊含义的字符脱掉马甲，现出原形，如\. 只表示小数点       |
|  6   |    *     |                             表示 0个或者多个                              |
|  7   |   ^.*    |                            代表任意多个字符开头                            |
|  8  |    []    | 匹配字符集内的任意一个字符    ,               ，[a-c]   匹配a，b,c中的任意一个 |
|  9   |   [^]    |                    匹配不包含^后的任意字符，是对[]的否定                    |
|  10  | a\{n,m\} |                            重复至少n次，至多m次                            |
## 6、扩展正则表达式
| 序号 | 特殊字符 |       含义与例子        |
| :--: | :-----: | :--------------------: |
|  1   |    +    |       重复1次以上       |
|  2   |    ？    |     重复0次或者1次      |
|  3   |   （）   | 表示是一个整体，向后引用 |
## 7、元字符
| 正则表达式 |            描述            |              示例              |
| --------- | -------------------------- | ------------------------------ |
| \b        | 单词边界                    | \bcool\b匹配cool，不匹配coolant |
| \B        | 非单词边界                  | cool\B匹配coolant不匹配cool     |
| \d        | 单个数字字符                | b\db匹配b2b，不匹配bcb          |
| \D        | 单个非数字字符              | b\Db匹配bcb不匹配b2b            |
| \w        | 单个单词字符（字母，数字与_) | \w匹配1或a，不匹配&             |
| \W        | 单个非单词字符              | \W匹配&，不匹配1或a             |
| \n        | 换行符                     | \n匹配一个新行                  |
| \s        | 单个空白字符                | x\sx匹配xx，不匹配xx            |
| \S        | 单个非空白字符              | x\S\x匹配xkx，不匹配xx          |
| \r        | 回车                       | \r匹配回车                      |
| \t        | 横向制表符                  | \t匹配一个横向制表符             |
| \v        | 垂直制表符                  | \v匹配一个垂直制表符             |
| \f        | 换页符	                     | \f匹配一个换页符                |
## 8、应用举例
### 8.1   匹配开头
   ``` shell
   grep  "^my" test.txt
   ```
### 8.2 匹配结尾

``` shell
  grep "teacher$" test.txt
```
### 8.3  匹配空行
```shell
  grep "^$" test.txt
```
### 8.4 匹配邮箱
####  1. 格式
     xx@yy.zz
#### 2.说明：
  >1. xx为字母或者数字，至少1个字符
 >2. @ ,必须存在
 >3. yy 字母或者数字，至少一个
 >4. .必须存在
>5. zz 字母，2到3个

####  3. 邮箱正则表达式
``` shell
    [a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-z]{2,3}
```
### 8.5 匹配数字
``` shell
grep "[0-9]*" test.txt
```
### 8.6 匹配URL
#### 1.格式
    protocol://domain:port/path/file
    例如： http://www.sina.com.cn
    http://localhost:8080/test/index.php
#### 2.协议
  1. protocol 以字符开头，至少2个字符
  2. 举例：http， ftp,  sendmail, jdbc
####  3.域名或者ip地址
  1. 域名形式： xx 或者 xx.yy,其中xx.可以有多个,如：www.baidu.com 、 localhost 、 master等
  2. IP地址形式：(xx.){3}yy ,其中xx.为数字，如: 192,168.1.1
#### 4.端口号
  1. 形式：:port
  2. 举例：:8081，:9100
#### 5.Path
  1. 路径形式：(/test)* 
  2. 举例： /test/admin/
#### 6.file
  1. 形式:  xxx.yy
  2. 举例：test.php,index.html
#### 7.URL正则表达式
``` shell
    \w+:\/\/(((\w+\.)+\w{2,3}?)|\w+)(:[0-9]+)?(\/\w+)*(\/\w+.[a-z]{2,4})?
```
 举例：
 ``` shell
 egrep "\w+:\/\/(((\w+\.)+\w{2,3}?)|\w+)(:[0-9]+)?(\/\w+)*(\/\w+.[a-z]{2,4})?" test.txt
 ```
 运行结果：
 ``` shell
 http://localhost/
http://localhost:8081/test/admin/index.html
ftp://localhost:8841/
http://www.sina.con.cn
 ```